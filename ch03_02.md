## GraphQL查询

Snowtooth山是一个虚构的滑雪胜地。为了本章中的示例，我们假装它是一座真正的山而我们在那里工作。我们将研究Snowtooth山的网站团队如何使用GraphQL提供最新的实时索道和步道的状态信息。Snowtooth Ski Patrol可以通过手机打开或关闭索道或步道。要遵循本章的示例，请参考[Snowtooth’s GraphQL Playground](http://snowtooth.moonhighway.com/)。

你可以使用query操作来从API请求数据。query描述了你想从GraphQL服务获取的数据。当你发送一个query时，请求的数据以字段作为单位。这些字段映射到你从服务器接收到的JSON数据中的字段。例如，如果你发送一个query，请求allLifts的name和status字段，你会接收到一个包含allLifts数组的JSON响应，数组中每个元素lift有一个name和status的字符串，参考：

```javascript
query {
  allLifts {
    name
    status
  }
}
```

> **_错误处理_**  
> 成功的查询返回一个JSON，JSON中包含一个key为data的字段。失败的查询返回一个JSON，JSON中包含一个key为errors的字段。错误的详细信息通过这个key传递。一个JSON响应有可能同时包含data和errors。  

你可以在查询文档中添加多个查询，但一次只能运行一个查询。例如，可以在一个查询文档中放两个查询：

```javascript
query lifts {
  allLifts {
    name
    status
  }
}

query trails {
  allTrails {
    name
    difficulty
  }
}

```

当你按下运行按钮， GraphQL Playground询问你选择这些查询中的一个。如果你想通过一个请求请求所有的数据，你需要把这些查询放到一个query中：

```javascript
query liftsAndTrails {
  liftCount(status: OPEN)
  allLifts {
    name
    status
  }
  allTrails {
    name
    difficulty
  }
}
```

GraphQL的好处在这里开始呈现。我们可以在一个查询中指定不同种类的数据。通过status查询liftCount，我们可以得到拥有指定status的lift的数量。我们也查询了每个lift的name和status。最后，在同一个query中，我们查询了每个trail的的name和status。

| :point_left: [上一节](/ch03_01.md) | [下一节](/ch03_03.md) :point_right: |
| - | - |
